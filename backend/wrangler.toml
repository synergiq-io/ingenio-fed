name = "synergiq-crm-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

[observability]
enabled = true

# Variables
[vars]
ENVIRONMENT = "production"
ALLOWED_ORIGINS = "*"  # Change to your frontend domain in production

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "synergiq-crm"
database_id = "3b84fede-2e10-4372-8250-b6fe0226ccf0" # Fill this after running: wrangler d1 create synergiq-crm

# Secrets (set via CLI):
# wrangler secret put JWT_SECRET
# wrangler secret put ENCRYPTION_KEY

# Development environment
[env.development]
vars = { ENVIRONMENT = "development" }

[[env.development.d1_databases]]
binding = "DB"
database_name = "synergiq-crm-dev"
database_id = ""

# Staging environment
[env.staging]
vars = { ENVIRONMENT = "staging" }

[[env.staging.d1_databases]]
binding = "DB"
database_name = "synergiq-crm-staging"
database_id = ""
