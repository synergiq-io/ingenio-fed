name = "synergiq-crm-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
node_compat = true

[observability]
enabled = true

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "synergiq-crm"
database_id = "" # Will be filled after running: wrangler d1 create synergiq-crm

# Environment Variables (Secrets - set via CLI)
# wrangler secret put JWT_SECRET
# wrangler secret put ENCRYPTION_KEY

[vars]
ENVIRONMENT = "production"

# Development environment
[env.development]
vars = { ENVIRONMENT = "development" }

[[env.development.d1_databases]]
binding = "DB"
database_name = "synergiq-crm-dev"
database_id = ""

# Staging environment
[env.staging]
vars = { ENVIRONMENT = "staging" }

[[env.staging.d1_databases]]
binding = "DB"
database_name = "synergiq-crm-staging"
database_id = ""

# CORS settings
[vars]
ALLOWED_ORIGINS = "*"  # Change to your frontend domain in production
